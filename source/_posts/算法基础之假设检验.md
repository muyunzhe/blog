---
title: 算法基础之假设检验
comments: true
toc: true
mathjax2: true
keywords: '牧云者,人工智能,云计算,数据挖掘,hexo,blog'
date: 2017-10-23 15:10:12
categories: [artificial-intelligence,algorithm]
tags: algorithm
---
假设检验是一种规则，它根据数据样本所提供的证据，指定是肯定还是否定有关总体的声明。
 <!--more-->
## 概念
 假设检验检查有关总体的两个相反假设：原假设和备择假设。原假设是要检验的声明。通常，原假设声明“无效应”或“无差异”。备择假设是希望根据样本数据所提供的证据得出真结论的声明。

 检验基于样本数据，确定是否要否定原假设。可使用 p 值来做出判断。如果 p 值小于显著性水平（用 α 或 alpha 表示），则可以否定原假设。  

 通俗来讲，就是：研究时，我们当然不希望否证自己的研究假设，所以我们就搞个和研究假设相反的虚无假设。如果我们否证了虚无假设，就相当于我们证明了研究假设。所以假设检验就是要试图否证虚无假设，或者说拒绝虚无假设。

 证明逻辑就是：我要证明命题为真->证明该命题的否命题为假->在否命题的假设下，观察到小概率事件发生了->否命题被推翻->原命题为真->搞定。
 结合这个例子来看：证明A是合格的投手-》证明“A不是合格投手”的命题为假-》观察到一个事件（比如A连续10次投中10环），而这个事件在“A不是合格投手”的假设下，概率为p，小于0.05->小概率事件发生，否命题被推翻。可以看到p越小-》这个事件越是小概率事件-》否命题越可能被推翻-》原命题越可信

## 原理
### 带概率性质的反证法原理
  反证法证明命题的一般步骤如下：
  1.假设结论的反面成立，即反设；
  2.由这个假设出发，经过正确的推理导出矛盾，即归谬；
  3.由矛盾判定假设不正确，从而肯定命题结论正确，即结论。

### 小概率事件原理
  费歇尔老先生提出了p值这个概念，用来表示在原假设成立的条件下，抽样结果的不合理和更不合理的概率。他还给出了一个判决点，即0.05，费歇尔p值小于1/20就足以拒绝原假设了。

  0.05是足够小的概率，一般认为，在一次抽样(试验)中，小概率事件几乎不可能发生，如果出现发生了，则说明事先的假设是错误的。但小概率事件并不是一定不会发生，当抽样次数足够多时，小概率事件是一定会发生的。这说明即使是一次抽样，小概率事件仍有可能发生，也就是说存在判断错误的可能性。在标准的假设检验中，对判错的概率进行了定义，这就是α和β风险.

##步骤
1. 将实际问题提炼为统计问题
加入：模型上线后效果是否好于上线前

2. 建立对立假设
原假设H_0 和备择假设H_a,通常我们将无区别的、不需证明的放在原假设，将有差别的、需要证明的放在备择假设.

3. 确定显著性水平α
显著性水平在这里也叫第一类风险，大多数情况下取0.05，当然也有取0.1或者0.01的。

4. 验证前提条件
在很多的方法应用中，都会有一些前提条件，如单样本z检验要求收集的数据要服从正态分布；方差分析中要求每个样本都要服从正态分布，且要满足方差齐性即方差相等的要求。这是因为每一种检验方法都是在这些前提假设中推导出来的，如果这些前提条件不能满足，则这个方法应用的效果就要大打折扣，这就是在每次检验是要验证前提条件的原因。

5. 确定检验统计量

6. 确定拒绝域
所谓的拒绝域，就是根据原假设划定的一个区域，当所抽样本计算出的统计量落在这个区域时，就可以拒绝原假设，可想而知，它代表的是样本远离原假设的程度。

7. 根据样本计算检验统计量的值并进行判断
确定了拒绝域，下面就是根据样本计算检验统计量的值，如果这个值落在拒绝域中，则拒绝原假设，接受备择假设；如果没有落在拒绝域，就说明拒绝原假设的证据还不够充分，但尽量不要说接受原假设。

8. 将统计判断结果转换成实际结果
最后一步，要把统计上得出的结论转换为实际的结论，并据此作出相应的决策。

## Z检验
当样本容量n>30的正态分布或非正态分布的样本的均值检验。当n<30的正态分布样本的均值检验要用t检验。

一般用于大样本(即样本容量大于30)平均值差异性检验的方法。它是用标准正态分布的理论来推断差异发生的概率，从而比较两个平均数的差异是否显著。
当已知总体标准差时，验证一组数的均值是否与某一期望值相等时（H0假设），用Z检验。
当样本n>30时，Z 检验和t检验结果是一致的！当n<30时，若样本是服从正态分布的，则要用t检验

## T 检验
 T 检验是针对分布期望 u 的检验。
 ![统计假设检验一t检验](http://www.algorithmdog.com/%E7%BB%9F%E8%AE%A1%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C%E4%B8%80t%E6%A3%80%E9%AA%8C)
t检验不需要知道总体方差，它用样本方差替代总体方差，得到的统计量服从t分布。

## 卡方检验
卡方检验用于检验观测到的数据是否服从特定多项分布。
![假设检验原理二卡方检验](http://www.algorithmdog.com/%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C%E5%8E%9F%E7%90%86%E4%BA%8C%E5%8D%A1%E6%96%B9%E6%A3%80%E9%AA%8C)

## F 检验
F检验又叫方差齐性检验，用于检验两组服从正态分布的样本是否具有相同的总体方差，即方差齐性。
![假设检验原理三: F 检验](http://www.algorithmdog.com/%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C%E5%8E%9F%E7%90%86%E4%B8%89f%E6%A3%80%E9%AA%8C)

## Z检验与T检验的区别
【z检验】---适用的data types：
1.随机，独立
2.n>30,preferable
3.n<=30,正态分布。n>30, not necessary.
4.样本方差应该相同
5.sample size尽可能相等，但一些不同也允许
6. 标准差已知，则z检验preferable

【t检验】---适用的data types：
1.随机，独立(除了paired-sample t test)
2.n<30
3.正态分布for the equal and unequal variance t-test
4.样本方差应该相同for the equal variance t-test
5.sample size尽可能相等，但一些不同也允许

用n<30(或其他标准60等）的小样本去估计总体的未知均值和未知方差，前提要求总体样本rough normal就是似正态分布，样本均值服从自由度为n-1的t分布，总体的方差为样本方差*root（n/n-1)，此时是t检验，同样的条件，n<30的小样本，总体均值未知，但总体方差已知，总体样本是似正态分布，样本均值服从正态分布，使用z检验；而n>30（或其他标准60等）的小样本去估计总体的未知均值和未知方差，不要求总体分布是否是似正态分布，因为中心极限定理，样本均值服从正态分布，总体方差可以用样本方差来估计，用z检验
